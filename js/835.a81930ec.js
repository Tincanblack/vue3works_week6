"use strict";(self["webpackChunkvue3works_week6"]=self["webpackChunkvue3works_week6"]||[]).push([[835],{422:function(t,e,i){function n(t){return{all:t=t||new Map,on:function(e,i){var n=t.get(e);n?n.push(i):t.set(e,[i])},off:function(e,i){var n=t.get(e);n&&(i?n.splice(n.indexOf(i)>>>0,1):t.set(e,[]))},emit:function(e,i){var n=t.get(e);n&&n.slice().map((function(t){t(i)})),(n=t.get("*"))&&n.slice().map((function(t){t(e,i)}))}}}i.d(e,{Z:function(){return a}});const s=n();var a=s},3835:function(t,e,i){i.r(e),i.d(e,{default:function(){return L}});var n=i(3396),s=i(7139),a=i(9242);const r=(0,n._)("h2",{class:"my-3"},"購物車",-1),o={class:"container"},l={class:"table align-middle"},c=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",null,"圖片"),(0,n._)("th",null,"商品名稱"),(0,n._)("th",null,"價格"),(0,n._)("th")])],-1),d={style:{width:"200px"}},u={key:0,class:"h5"},h={key:1},p={class:"h6"},g={class:"h5"},_=["onClick","disabled"],w={class:"spinner-border spinner-border-sm"},k=(0,n.Uk)(" 加到購物車 ");function m(t,e,i,m,v,f){return(0,n.wg)(),(0,n.iD)(n.HY,null,[r,(0,n._)("div",o,[(0,n._)("table",l,[c,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(v.products,(t=>((0,n.wg)(),(0,n.iD)("tr",{key:t.id},[(0,n._)("td",d,[(0,n._)("div",{style:(0,s.j5)([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${t.imageUrl})`}])},null,4)]),(0,n._)("td",null,(0,s.zw)(t.title),1),(0,n._)("td",null,[t.price===t.origin_price?((0,n.wg)(),(0,n.iD)("div",u,(0,s.zw)(t.price)+" 元 ",1)):((0,n.wg)(),(0,n.iD)("div",h,[(0,n._)("del",p,"原價 "+(0,s.zw)(t.origin_price)+" 元",1),(0,n._)("div",g," 現在只要 "+(0,s.zw)(t.price)+" 元 ",1)]))]),(0,n._)("td",null,[(0,n._)("button",{type:"button",class:"btn btn-outline-danger",onClick:e=>f.addToCart(t.id),disabled:v.isLoadingItem===t.id},[(0,n.wy)((0,n._)("span",w,null,512),[[a.F8,v.isLoadingItem===t.id]]),k],8,_)])])))),128))])])])],64)}var v=i(422),f={data(){return{cartsData:{carts:[]},products:[],isLoadingItem:""}},methods:{getProductsList(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/works/products/all").then((t=>{this.products=t.data.products})).catch((t=>{alert(t.data.message)}))},addToCart(t,e=1){const i={product_id:t,qty:e};this.isLoadingItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/works/cart/",{data:i}).then((t=>{alert(t.data.message),this.isLoadingItem="",v.Z.emit("get-cart-count")})).catch((t=>{alert(t.data.message)}))}},mounted(){this.getProductsList()}},b=i(89);const y=(0,b.Z)(f,[["render",m]]);var L=y}}]);
//# sourceMappingURL=835.a81930ec.js.map